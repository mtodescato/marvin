notifications:
  slack:
    rooms:
    - novegroup:SNV4w4RI7iU2gnStO5lhsPZI#github
  email: false

language: node_js
node_js:
  - "6"

before_install:
- sudo apt-get update
- npm install -g truffle
- npm install -g solhint

all_branches: true

script:
- npm install 
- cd src/bc
- solhint ./contracts/*
- truffle compile
- truffle test --network develop
- cd ../..
- npm run lint
- npm run test

before_deploy:
- npm install eslint-plugin-jsx-a11y@^5.1.1
- npm run build
- cd build
- mv index.html 200.html
- cd ../..

deploy:
  provider: surge
  file_glob: true
  skip_cleanup: true
  project: ./build/
  domain: velociraptor.surge.sh
  on:
    branch: master
